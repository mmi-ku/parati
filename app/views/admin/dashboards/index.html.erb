<div class="container">
  <div class="row">
    <div class="col-md-8 offset-md-2">
      <%= form_with url: admin_dashboards_path, method: :get do |f| %>
        <div class="row">
          <div class="col-sm-9 mb-2">
            <%= f.search_field :keyword, placeholder: "キーワードで検索", value: params[:keyword], class: "form-control" %>
          </div>
          <div class="col-sm-3 mb-2">
            <%= f.submit "検索", class: "btn btn-primary btn-block" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
  <div class="row justify-content-center">
    <div class="col-md-8">
      <h3 class="text-center">Users List</h3>
      <ul class="list-group mb-4"> 
        <% @users.each do |user| %>
          <li class="list-group-item d-flex justify-content-between align-items-center" style="<%= 'background-color: gray' unless user.is_valid %>">
            <div>
              <strong><%= user.name %></strong> - <%= user.email %>
            </div>
            <div>
              <% unless user.is_valid %>
                <span>User left</span>
              <% else %>
                <%= link_to 'Delete', withdraw_admin_user_path(user), method: :patch, class: 'btn btn-danger btn-sm', data: { confirm: 'Are you sure you want to delete this user?' } %>
              <% end %>
            </div>
          </li>
        <% end %>
      </ul>
      <div class="text-center">
        <%= link_to "Back", admin_genres_path, class: "btn btn-primary btn-block" %> 
      </div>
    </div>
  </div>
</div>